"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2135],{82135:function(e,n,t){t.d(n,{Z:function(){return q}});var r=t(85893),a=t(67294),s=t(86936),o=t(77407),d=t(7297),i=t(87379),c=t(18334),l=t(7178);function u(){var e=(0,d.Z)(["\n  display: flex;\n  width: 100%;\n\n  @media "," {\n    flex-direction: column;\n  }\n"]);return u=function(){return e},e}function f(){var e=(0,d.Z)(["\n  justify-content: space-between;\n\n  border-radius: 8px;\n  height: 55px;\n\n  img {\n    width: 24px;\n    height: 24px;\n  }\n\n  @media "," {\n    width: 100%;\n  }\n\n  input {\n    border: none;\n    width: 100%;\n    padding-inline-end: 20px;\n\n    @media "," {\n      caret-color: transparent;\n    }\n  }\n\n  @media "," {\n    height: 50px;\n    margin-bottom: 16px;\n    img {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,d.Z)(["\n  position: relative;\n  width: 100%;\n\n  .arrow {\n    background-color: ",";\n    color: ",";\n    line-height: 1.25;\n    padding: 8px 8px !important;\n    width: 100%;\n    box-shadow: none;\n    border: none;\n    border-radius: 4px;\n    text-align: center;\n    &:disabled {\n      opacity: 0.65;\n    }\n  }\n\n  &.-opened {\n    "," {\n      border: solid ",";\n      border-width: 0 1px 1px;\n      box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.1);\n      border-bottom-left-radius: 8px;\n      border-bottom-right-radius: 8px;\n    }\n\n    "," {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.1);\n    }\n  }\n\n  "," {\n    width: 100%;\n    transition: box-shadow 500ms ease-in;\n  }\n\n  "," {\n    position: relative;\n    transition: box-shadow 500ms ease-in;\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,d.Z)(["\n  margin-inline-start: 16px;\n  height: 52px;\n  border-radius: 8px;\n  line-height: 1.25;\n  padding: 16px 37px !important;\n  font-size: 16px;\n  color: white;\n  background-color: var(--primary-color);\n\n  :hover {\n    color: white;\n    background-color: var(--primary-hover-color);\n  }\n\n  @media "," {\n    margin-inline-start: 0;\n  }\n"]);return p=function(){return e},e}var g,m=i.ZP.div.withConfig({componentId:"sc-21989d75-0"})(u(),c.Uh.mobile),v=i.ZP.div.withConfig({componentId:"sc-21989d75-1"})(f(),c.Uh.mobile,c.Uh.mobile,c.Uh.mobile),b=i.ZP.div.withConfig({componentId:"sc-21989d75-2"})(h(),c.eB.primary.main,c.eB.white,l.P,c.eB.formControl.border,v,l.P,v),w=i.ZP.button.withConfig({componentId:"sc-21989d75-3"})(p(),c.Uh.mobile),x=t(828),S=t(47568),A=t(20414),C=t(85110),y=t(91904),Z=t(71850),k=t(25617),I=t(8547),_=function(e,n){if(e){var t=null==n?void 0:n.find(function(n){return n.encryptedAddressId==e});return t?(C.Z.preSelectedAddress(t),t):null}},L=(g=(0,S.Z)(function(e,n){var t,r;return(0,A.__generator)(this,function(a){switch(a.label){case 0:return[4,y.Z.getSavedAddress({countryId:e})];case 1:return r=_(n,t=a.sent()),[2,{savedAddresses:t,address:r}]}})}),function(e,n){return g.apply(this,arguments)}),E=t(74322),N=t(12040),j=t(78947),M=t(89480),P=t(79126),D=function(e,n,t,s,o,d,i,c){var l,u,f,h=function(e){return{AddressDropdown:e,onSearch:ec,showDropdown:m,setShowDropdown:v,savedAddresses:ed}},p=(0,k.v9)(I.l7).any,g=(0,a.useState)(!1),m=g[0],v=g[1],b=(0,a.useCallback)(function(){return v(!1)},[v]),w=(0,a.useRef)(null),_=(0,a.useRef)(null);l=function(){!p&&b()},u=[w,_],(0,a.useEffect)(function(){var e=function(e){var n=e.target;u.some(function(e){return e.current&&e.current.contains(n)})||l()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[]);var D,B,U,$,F,H,R,O,W,q,z,G,K,T,Y,V,X,J,Q,ee,en=(0,x.Z)([f=(0,N.YN)(),(0,a.useCallback)(function(e){(0,N.$B)(e)},[])],1)[0],et=($=(U=(0,a.useState)(null))[0],F=U[1],{onSearchAddressSelected:(0,a.useCallback)((H=(0,S.Z)(function(n){var t,r,a;return(0,A.__generator)(this,function(a){switch(a.label){case 0:return b(),C.Z.dropdownDifferentLocationSelected(n.areaName),[4,y.Z.getGooglePlaceDetails(n.encryptedAddressId)];case 1:return e(r=(t=a.sent()).latitude,t.longitude),[2]}})}),function(e){return H.apply(this,arguments)}),[e,b]),searchAddresses:$,setSearchAddresses:F}),er=et.onSearchAddressSelected,ea=et.searchAddresses,es=et.setSearchAddresses,eo=(T=(0,k.v9)(I.lt),Y=(0,k.v9)(I.ts),X=(V=(0,a.useState)([]))[0],J=V[1],Q=(0,N.YN)(),(0,a.useEffect)(function(){(0,S.Z)(function(){var e;return(0,A.__generator)(this,function(r){switch(r.label){case 0:if(!(null==Y?void 0:Y.firstName))return[2];return[4,L(T.id,Q)];case 1:return J((e=r.sent()).savedAddresses),e.address?n(e.address):t(c),[2]}})})()},[Y,c]),{onSavedAddressSelected:(0,a.useCallback)((ee=(0,S.Z)(function(n){var t,r,a;return(0,A.__generator)(this,function(o){switch(o.label){case 0:if(!n.lat||!n.lng)return t=(0,E.XV)(d,n.areaId),e(t.lat,t.lng),[2];return b(),C.Z.dropdownAddressSelected(n),r={CountryId:T.id,latitude:n.lat,longitude:n.lng,restaurantId:null},[4,y.Z.getAddressOnCoordsChange(r)];case 1:var i,c;return(c=!!((i=a=o.sent().address).lat&&i.lng),!i.error.message&&c)?((0,N.$B)(n.encryptedAddressId),Z.Z.setCookieArea(!1,a),s(a)):e(n.lat,n.lng),[2]}})}),function(e){return ee.apply(this,arguments)}),[s,e,b]),savedAddresses:X}),ed=eo.savedAddresses,ei=eo.onSavedAddressSelected,ec=(0,a.useCallback)(function(e){es(e),v(!0)},[]),el=ea&&ea.length>0,eu=ea&&0===ea.length,ef=ed&&ed.length>0;return h(m?el?(0,r.jsx)(j.y,{ref:w,onAddressSelected:er,selectedEncryptedAddressId:en,addresses:ea}):eu?(0,r.jsx)(M.e,{ref:_,addresses:ed,selectedEncryptedAddressId:en,onAddressSelected:ei,onTalabatAreaClick:o}):ef?p?(0,r.jsx)(P.W,{addresses:ed,show:!0,handleAddressSelection:ei,handleClose:b,deliverToDifferentLocation:i}):(0,r.jsx)(j.y,{ref:w,onAddressSelected:ei,selectedEncryptedAddressId:en,addresses:ed}):null:null)},B=t(83744),U=t(69553),$=t(42683),F=t(26042),H=t(69396),R=t(41043),O=t(65885),W=t(32800),q=function(e){var n,t,d,i,c,l,u,f,h,p,g,x,y,Z,_,L,N,j,M,P=e.isMobile,q=e.onAddressSelected,z=e.vertical,G=e.fromHomePage,K=(0,U.$G)().t,T=(n=(0,k.v9)(I.lt),d=(t=(0,a.useState)(null))[0],i=t[1],l=(c=(0,a.useState)())[0],u=c[1],f=new O.default().get(R.WE),(0,a.useEffect)(function(){p()},[]),h=(0,S.Z)(function(){var e;return(0,A.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,W.K)(n.id)];case 1:return i(e=t.sent().areas),g(e),[2]}})}),p=function(){return h.apply(this,arguments)},g=(0,a.useCallback)(function(e){if(f){var n=(0,E.$t)(e,f);if(n){var t,r,a=(0,H.Z)((0,F.Z)({},f),{lat:null!==(t=f.lat)&&void 0!==t?t:f.ltd,lng:null!==(r=f.lng)&&void 0!==r?r:f.lngt});u(a),C.Z.preSelectedAddress(n)}else f=null}},[]),{preSelectedArea:l,areaList:d,setPreSelectedArea:u}),Y=T.setPreSelectedArea,V=T.preSelectedArea,X=T.areaList,J=(0,a.useState)(null),Q=J[0],ee=J[1],en=(0,a.useState)(null),et=en[0],er=en[1],ea=(y=(x=(0,a.useState)(!1))[0],Z=x[1],L=(_=(0,a.useState)(""))[0],N=_[1],j=(0,a.useCallback)(function(e,n){N(e?"".concat(e,",").concat(n):""),Z(!0)},[N,Z]),M=(0,a.useCallback)(function(){Z(!1)},[Z]),{showMap:y,coords:L,openMap:j,closeMap:M}),es=ea.showMap,eo=ea.coords,ed=ea.openMap,ei=ea.closeMap,ec=(0,a.useState)(!1),el=ec[0],eu=ec[1],ef=(0,k.v9)(I.ts);(0,a.useEffect)(function(){(null==ef?void 0:ef.firstName)||ee(V)},[null==V?void 0:V.id]);var eh,ep=(0,a.useCallback)(function(){return eu(!0)},[eu]),eg=(0,a.useState)(!1),em=eg[0],ev=eg[1],eb=D(ed,er,ee,q,ep,X,function(){eS(!1),ed()},V),ew=eb.AddressDropdown,ex=eb.showDropdown,eS=eb.setShowDropdown,eA=eb.onSearch,eC=eb.savedAddresses,ey=(0,a.useCallback)(function(){eC&&eC.length>0?eS(!0):ed()},[eC]),eZ=(0,a.useCallback)(function(e){if(!P){eS(e);return}ey()},[P,eC]),ek=(0,a.useCallback)(function(){er(null),ee(null),ev(!1),Y(null)},[]),eI=(0,a.useCallback)(function(){ev(!1),(0,E.nu)(function(e){var n,t=e.coords;C.Z.locateMe(t),ed(t.latitude,t.longitude)},function(){ed()})},[]),e_=(0,a.useCallback)(function(e){var n=e.name,t=e.lat,r=e.lng;C.Z.dropdownDifferentLocationSelected(n),ed(t,r)},[q]),eL=(0,a.useCallback)(function(){if(et){var e,n=et.areaId,t=et.areaName,r=et.lat;q({areaId:n,areaName:t,lat:r,lng:et.lng,cityId:et.cityId})}else{if(V){var a,s=V.id,o=V.name;q({areaId:s,areaName:o,lat:V.lat,lng:V.lng});return}if(P){ey();return}ev(!0)}},[et,q,P,ey,ev,V,]),eE=(0,a.useCallback)(function(e,n,t,r,a,s){q({areaId:t,areaName:s,lat:e,lng:n,cityId:r}),ei()},[ei]),eN=(0,a.useRef)(null),ej=(eh=12,(eo||et&&0!==et.lat)&&(eh=17),eh);return(0,r.jsxs)(m,{"data-testid":"address-selector-component",className:"AddressSelectorWrapper",children:[(0,r.jsxs)(b,{className:ex&&ew?"-opened FindLocator":"FindLocator",children:[(0,r.jsx)(s.R,{ref:eN,area:Q,address:et,onFocus:function(){return ev(!1)},onSearch:eA,onClear:ek,handleLocateMe:eI,showUserAddressesHandler:eZ,isMobile:P,ButtonContainer:v,showLocateMeOnMobile:!0}),ew,em&&(0,r.jsxs)($.Ed,{className:"arrow p-2",children:[(0,r.jsx)($.IB,{}),K("common:map-first-required.translation")]}),es&&(0,r.jsx)(o.hg,{handleClose:ei,restaurantId:null,confirmationSelectionHandler:eE,defaultLatLngForMap:eo,zoomLevel:ej,address:et,vertical:z,fromHomePage:G}),el&&(0,r.jsx)(B.O,{"data-test":"area-popup",areas:X,show:el,handleClose:function(){return eu(!1)},handleSelectedArea:e_})]}),(0,r.jsx)(w,{className:"btn",onClick:eL,"data-testid":"letsgo-btn",children:K("common:lets-go.translation")})]})}},32800:function(e,n,t){t.d(n,{K:function(){return c},B:function(){return l}});var r,a,s=t(47568),o=t(20414),d=t(41043),i=t(36650),c=(r=(0,s.Z)(function(e){var n,t;return(0,o.__generator)(this,function(t){switch(t.label){case 0:var r;return n="/location/country-areas/".concat(e),[4,(0,i.x1)().get(n)];case 1:return[2,{areas:t.sent().data.areas}]}})}),function(e){return r.apply(this,arguments)}),l=(a=(0,s.Z)(function(e,n){var t,r,a,s,c,l,u,f;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,i.x1)(n,"".concat(d.q3).concat(d.tr)).get("/v1/pages/".concat(e,"/home"))];case 1:if(s=(a=t.sent().data.result).cuisines,c=a.areas,!((u=a.cities)&&u.length>0))return[3,5];f=u[0],t.label=2;case 2:return t.trys.push([2,4,,5]),[4,(0,i.x1)(n,"".concat(d.y$)).get("/city-pages/".concat(e,"/").concat(f.sl))];case 3:return t.sent(),[3,5];case 4:return t.sent(),u=[],[3,5];case 5:return[2,{cuisines:s,areas:c,cities:u}]}})}),function(e,n){return a.apply(this,arguments)})}}]);