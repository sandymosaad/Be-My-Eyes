"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7407],{34947:function(e,t,n){n.d(t,{H:function(){return s}});var r=n(36007),a=n(18334),s={groceries:{headerBackgroundColor:a.eB.banner.background,leftImage:"vertical-groceries1.png",rightImage:"vertical-groceries2.png",vertical:r.k[r.k.grocery]},pharmacies:{headerBackgroundColor:a.eB.banner.background,leftImage:"",rightImage:"",vertical:r.k[r.k.pharmacy]},flowers:{headerBackgroundColor:a.eB.banner.background,leftImage:"",rightImage:"",vertical:r.k[r.k.flower]}}},77407:function(e,t,n){n.d(t,{hg:function(){return H}});var r=n(47568),a=n(26042),s=n(69396),o=n(828),i=n(20414),d=n(85893),l=n(59253),c=n(92814),u=n(8547),m=n(41043),v=n(91904),g=n(85110),p=n(71850),f=n(74322),h=n(44785),b=n(69553),_=n(5152),y=n.n(_),x=n(67294),N=n(33763),I=n(25617),C=n(65885),G=n(7297),A=n(18334),S=n(87379);function L(){var e=(0,G.Z)(["\n  .arrow_box {\n    background: ",";\n  }\n\n  .arrow_box:after,\n  .arrow_box:before {\n    bottom: 100%;\n    left: 50%;\n    border: solid transparent;\n    content: ' ';\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n  }\n\n  .arrow_box:after {\n    border-color: rgba(187, 61, 36, 0);\n    border-bottom-color: ",";\n    border-width: 10px;\n    margin-left: -10px;\n  }\n\n  .arrow_box:before {\n    border-color: rgba(0, 0, 0, 0);\n    border-width: 16px;\n    margin-left: -16px;\n  }\n\n  .loading {\n    background-color: #eef0f5;\n    height: 22px;\n  }\n  .load-spin {\n    -webkit-animation: fa-spin 0.5s infinite linear;\n    animation: fa-spin 0.5s infinite linear;\n  }\n  @media "," {\n    .actions-container {\n      position: fixed;\n      max-height: 108px;\n      bottom: 8px;\n      background: ",";\n      left: 0;\n      right: 0;\n    }\n  }\n"]);return L=function(){return e},e}var j,E=S.ZP.div.withConfig({componentId:"sc-42a8808a-0"})(L(),A.eB.blue,A.eB.blue,A.Uh.mobile,A.eB.white),k={TOGGLE_LOADING:"TOGGLE_LOADING",SET_ADDRESS:"SET_ADDRESS",TOGGLE_CHANGE_COUNTRY_CONFIRMATION:"TOGGLE_CHANGE_COUNTRY_CONFIRMATION",TOGGLE_DRAGGING:"TOGGLE_DRAGGING",SET_AVAILABLE_VERTICALS:"SET_AVAILABLE_VERTICALS"},T={isLoading:!1,selected:null,countryChangeConfirmed:!1,isDragging:!1,availableVerticals:null},O=function(e,t){switch(t.type){case k.TOGGLE_LOADING:return(0,s.Z)((0,a.Z)({},e),{isLoading:!e.isLoading});case k.SET_ADDRESS:return(0,s.Z)((0,a.Z)({},e),{selected:t.payload,isLoading:!1});case k.SET_AVAILABLE_VERTICALS:return(0,s.Z)((0,a.Z)({},e),{availableVerticals:t.payload,isLoading:!1});case k.TOGGLE_DRAGGING:return(0,s.Z)((0,a.Z)({},e),{isDragging:t.payload});case k.TOGGLE_CHANGE_COUNTRY_CONFIRMATION:return(0,s.Z)((0,a.Z)({},e),{countryChangeConfirmed:!e.countryChangeConfirmed});default:return e}},Z=n(34947),w=n(36007),D=n(51436),R=n(12040),F=(j=(0,r.Z)(function(e,t,n,r,a,s){var d,l,c,u,m,g;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(d={CountryId:t,latitude:e.lat,longitude:e.lng,restaurantId:n},s({type:k.TOGGLE_LOADING,payload:!0}),!r)return[3,2];return[4,Promise.all([v.Z.getCoordinateAddress(e,t),h.Z.getCoordinatesVertical(e,t)])];case 1:return c=(l=o.Z.apply(void 0,[i.sent(),2]))[0],u=l[1],s({type:k.SET_ADDRESS,payload:{address:c}}),s({type:k.SET_AVAILABLE_VERTICALS,payload:u}),[2];case 2:if(!a)return[3,4];return[4,v.Z.getCoordinateAddress(e,t)];case 3:return m=i.sent(),s({type:k.SET_ADDRESS,payload:{address:m}}),[2];case 4:return[4,v.Z.getAddressOnCoordsChange(d)];case 5:return g=i.sent(),s({type:k.SET_ADDRESS,payload:g}),[2]}})}),function(e,t,n,r,a,s){return j.apply(this,arguments)}),B=function(e,t){var n,r,a=(n=e,w.k[null===(r=Z.H[n])||void 0===r?void 0:r.vertical]);return e&&!(null==t?void 0:t.tiles.find(function(e){return a===e.id}))},H=function(e){var t=e.defaultLatLngForMap,h=e.handleClose,_=e.restaurantId,G=e.title,A=e.address,S=e.areaName,L=e.confirmationSelectionHandler,j=e.zoomLevel,Z=e.vertical,w=e.fromHomePage,H=(0,b.$G)(),V=H.t,U=H.i18n,M=(0,o.Z)(x.useReducer(O,T),2),J=M[0],P=M[1],q=(0,I.v9)(u.W7),Y=(0,I.v9)(u.lt).id,z=(0,I.v9)(u.Wx),W=function(){return(0,d.jsx)("div",{className:"d-flex d-flex justify-content-center align-items-center spinner-container",children:(0,d.jsx)(l.$,{justSpinner:!0})})},$=function(){P({type:k.TOGGLE_DRAGGING,payload:!0})},K=function(){P({type:k.TOGGLE_DRAGGING,payload:!1})},Q=y()(function(){return Promise.all([n.e(6725),n.e(8937)]).then(n.bind(n,18937)).then(function(e){return e.GoogleMapComponent})},{loadableGenerated:{webpack:function(){return[18937]}},loading:W}),X=function(){var e="";return J.selected.address.additionalDirection&&(e+="".concat(J.selected.address.additionalDirection," , ")),J.selected.address.street&&(e+="".concat(J.selected.address.street,", ")),J.selected.address.block?e+="".concat(J.selected.address.block,", "):J.selected.address.avenue&&(e+="".concat(J.selected.address.avenue,", ")),J.selected.address.areaName&&(e+=J.selected.address.areaName),e},ee=function(e,t){t.exd||(e.exd=""),e.id=t.aid;var n=!0,r=!1,a=void 0;try{for(var s,i=Object.entries(t)[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var d=(0,o.Z)(s.value,2),l=d[0],c=d[1];c&&(e[l]=c)}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e},et=(0,x.useRef)((0,d.jsx)(Q,{onDragStartHandler:function(){return $()},onDragEndHandler:K,isMapFirst:!0,zoomLevel:j||14,areaName:void 0===S?"":S,defaultLatLngForMap:void 0===t?"":t,address:A,markerPath:"/assets/images/marker.svg",onCoordsChange:function(e){return F(e,Y,_,Z,w,P)}}));return(0,d.jsxs)(N.Z,{show:!0,dialogClassName:"modal-600",onHide:h,centered:!0,backdrop:"static",children:[(0,d.jsxs)(N.Z.Header,{className:"d-flex",children:[(0,d.jsx)("div",{className:"my-1 f-18 f-500 mx-auto","data-test":"map-first-title","data-testid":"map-first-title",children:G||V("common:mapFirstTitle.translation")}),(0,d.jsx)("div",{style:{width:14},className:"clickable close-span ml-0 ",children:(0,d.jsx)("img",{onClick:h,src:"/assets/images/search-close.svg",alt:"Alert Close Button Image"})})]}),(0,d.jsx)(N.Z.Body,{className:"px-0 pt-0 pb-0",children:(0,d.jsxs)(E,{children:[(0,d.jsx)(d.Fragment,{children:et.current}),(0,d.jsx)("div",{className:"pt-2 ".concat(q?"px-2":"px-5"," actions-container"),children:function(){if(J.isLoading||J.isDragging)return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"loading mb-1"}),(0,d.jsx)("button",{"data-test":"btn-deliver-here",className:"primary-button f-16 mb-2",disabled:!0,children:J.isDragging?V("common:mapFirstButtonDeliverHere.translation"):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"mr-1",children:(0,d.jsx)(c.G,{className:"load-spin",icon:D.IJ7})}),V("common:mapFirstButtonLoading.translation")]})})]});if(null===J.selected)return(0,d.jsx)("button",{"data-test":"btn-deliver-here",className:"primary-button f-16 mb-2",disabled:!0,children:V("common:mapFirstButtonDeliverHere.translation")});var e=(null===(n=J.selected)||void 0===n?void 0:null===(o=n.address)||void 0===o?void 0:null===(l=o.error)||void 0===l?void 0:l.statusCode)===-1;if(e&&J.countryChangeConfirmed){var t=(0,f.A9)(J.selected.address.countryId);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"f-13 px-2",children:[(0,d.jsx)("img",{className:"mr-2",width:"12",src:"/assets/images/marker.svg"}),V("common:mapFirstChangeCountryConfirmationLabel.translation",{country:U.getResource(z,"common","".concat(t,".translation"))})]}),(0,d.jsxs)("div",{className:"d-flex text-center mb-2",children:[(0,d.jsx)("div",{className:"d-flex flex-column w-50 px-2 ",children:(0,d.jsx)("button",{"data-test":"btn-deliver-here",onClick:function(){return P({type:k.TOGGLE_CHANGE_COUNTRY_CONFIRMATION})},className:"btn btn-secondary-outline f-16 py-2 text-capitalize",disabled:!1,children:V("common:no.translation")})}),(0,d.jsx)("div",{className:"d-flex flex-column w-50 px-2",children:(0,d.jsx)("button",{onClick:function(){g.Z.mapFirstChangeCountryConfirm(null===(e=J.selected.address)||void 0===e?void 0:e.countryId),g.Z.changeCountry(J.selected.address.countryId);var e,t=new C.default;t.remove(m.Gn,{path:"/"}),t.remove(m.WE,{path:"/"}),t.remove(m.b8,{path:"/"}),window.location.href="/".concat((0,f.A9)(J.selected.address.countryId))},className:"primary-button f-16 btn-block text-capitalize",disabled:!1,children:V("common:yes.translation")})})]})]})}if(e){var n,o,l,u,h,b,y,x,N,I,G,S=(0,f.A9)(J.selected.address.countryId);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("label",{className:"f-13",children:V("common:mapFirstChangeCountryLabel.translation",{country:U.getResource(z,"common","".concat(S,".translation"))})}),(0,d.jsx)("button",{onClick:function(){return P({type:k.TOGGLE_CHANGE_COUNTRY_CONFIRMATION})},className:"primary-button f-16 mb-2",disabled:(null===(I=J.selected)||void 0===I?void 0:null===(G=I.ListBranchInfo)||void 0===G?void 0:G.length)===0,children:V("common:mapFirstChangeCountryButton.translation")})]})}return(null===(u=J.selected)||void 0===u?void 0:null===(h=u.address)||void 0===h?void 0:null===(b=h.error)||void 0===b?void 0:b.statusCode)===-3||_&&(null===(y=J.selected)||void 0===y?void 0:y.branchInfo.branchId)===0||(null===(x=J.selected)||void 0===x?void 0:x.address.areaId)===0||B(Z,J.availableVerticals)?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("button",{"data-test":"btn-deliver-here",className:"primary-button f-16 mb-2",disabled:!0,children:V(_?"common:mapFirstButtonNotDeliver.translation":"common:mapFirstButtonWeDoNotDeliver.translation")})}):A&&!(null==A?void 0:A.lat)&&(null===(N=J.selected)||void 0===N?void 0:N.address)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"f-13 px-2","data-testid":"lbl-address-description",children:[(0,d.jsx)("img",{className:"mr-2",width:"12",src:"/assets/images/marker.svg"}),V("common:mapFirstLabelDeliverTo.translation"),X()]}),(0,d.jsxs)("div",{className:"d-flex text-center",children:[(0,d.jsxs)("div",{className:"d-flex flex-column w-50 px-2",children:[(0,d.jsx)("button",{onClick:function(){g.Z.updateAddress("Save For Later"),sessionStorage.setItem(m.v8,JSON.stringify((0,s.Z)((0,a.Z)({},JSON.parse(J.selected.address.rawAddressObj)),{fromMap:!0}))),p.Z.setCookieArea(!0,J.selected.address),L(J.selected.address.lat,J.selected.address.lng,J.selected.address.areaId,J.selected.address.cityId,J.selected.branchInfo,J.selected.address.slug,J.selected.isGroupRest)},className:"btn btn-secondary-outline f-14 py-2 text-uppercase",disabled:!1,children:V("common:mapFirstButtonSaveForLater.translation")}),(0,d.jsx)("label",{className:"f-13",children:V("common:mapFirstLabelSaveForLater.translation")})]}),(0,d.jsxs)("div",{className:"d-flex flex-column w-50 px-2",children:[(0,d.jsx)("button",{className:"primary-button f-14 btn-block",disabled:!1,onClick:(0,r.Z)(function(){var e,t,n,r;return(0,i.__generator)(this,function(o){switch(o.label){case 0:return g.Z.updateAddress("Update Now"),n=JSON.parse(J.selected.address.rawAddressObj),r=ee(JSON.parse(A.rawAddressObj),n),[4,v.Z.updateAddressInfo((0,s.Z)((0,a.Z)({},r),{id:null===(e=J.selected)||void 0===e?void 0:e.address.areaId,fromBrandPage:!0,restaurantId:_,justAreaNm:null===(t=J.selected)||void 0===t?void 0:t.address.areaName,branchInfo:J.selected.branchInfo,groupBranchInfo:{isGroupRest:J.selected.isGroupRest,lstBranchInfo:J.selected.ListBranchInfo},desc:"".concat(J.selected.address.street,", ").concat(J.selected.address.areaName)}))];case 1:return o.sent(),sessionStorage.removeItem(m.v8),p.Z.setCookieArea(!1,J.selected.address),L(J.selected.address.lat,J.selected.address.lng,J.selected.address.areaId,J.selected.address.cityId,J.selected.branchInfo,J.selected.address.slug,J.selected.isGroupRest),[2]}})}),children:V("common:mapFirstButtonUpdateNow.translation")}),(0,d.jsx)("label",{className:"f-13",children:V("common:mapFirstLabelUpdateNow.translation")})]})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("label",{className:"f-13 mb-2",children:[(0,d.jsx)("img",{className:"mr-2",width:"12",src:"/assets/images/marker.svg"}),V("common:mapFirstLabelDeliverTo.translation"),(0,d.jsx)("span",{className:"f-500 f-14",children:X()})]}),(0,d.jsx)("button",{"data-test":"btn-deliver-here",onClick:function(){g.Z.deliverHereClicked(J.selected.address.areaName),sessionStorage.removeItem(m.v8),sessionStorage.setItem(m.v8,JSON.stringify((0,s.Z)((0,a.Z)({},JSON.parse(J.selected.address.rawAddressObj)),{fromMap:!0}))),p.Z.setCookieArea(!0,J.selected.address),(0,R.UG)(),L(J.selected.address.lat,J.selected.address.lng,J.selected.address.areaId,J.selected.address.cityId,J.selected.branchInfo,J.selected.address.slug,J.selected.isGroupRest)},className:"primary-button f-16 mb-2",disabled:!1,children:V("common:mapFirstButtonDeliverHere.translation")})]})}()})]})})]})}},44785:function(e,t,n){n.d(t,{Z:function(){return h}});var r,a,s,o=n(47568),i=n(51438),d=n(26042),l=n(69396),c=n(99534),u=n(20414),m=n(36007),v=n(28520),g=n(36650),p=function(e){var t=e.vendor_name,n=e.vendor_id,r=e.is_dark_store,a=e.rating,s=e.delivery_charges_type,o=e.vendor_image,i=e.delivery_time,l=e.is_tgo,u=e.sponsored,m=e.is_grl_enabled,v=e.vendor_status,g=(0,c.Z)(e,["vendor_name","vendor_id","is_dark_store","rating","delivery_charges_type","vendor_image","delivery_time","is_tgo","sponsored","is_grl_enabled","vendor_status"]);return(0,d.Z)({id:n,name:t,logo:o,deliveryChargesType:s,deliveryTime:i,isDarkstore:r,rate:a,isTalabatGO:l,Sponsored:u,grlRequired:m,status:v},g)},f=function(e){var t,n,r=e.vendor,a=e.baseURL,s=(null===(t=r.cuisines)||void 0===t?void 0:t.map(function(e){return e.na}).join(", "))||"";return{id:r.chain_id,name:r.vendor_name,cuisineString:s,heroImage:"".concat(a,"restaurants/").concat(r.vendor_image,"?width=750"),logo:"".concat(a,"restaurants/").concat(r.vendor_image,"?width=180"),rate:r.rating,totalRatings:+(null==r?void 0:null===(n=r.total_ratings)||void 0===n?void 0:n.replace(/[,.]/g,""))||0,deliveryFee:r.delivery_charges,avgDeliveryTime:r.time_estimation,statusCode:r.vendor_status,isTalabatGO:r.is_tgo,verticalType:r.vertical_type,isGrocery:r.vertical_type!==m.k.restaurant,status:r.vendor_status,deliveryChargesType:r.delivery_charges_type,isDarkstore:!!r.is_dark_store,isShopSponcered:r.is_sponsored,grlRequired:r.is_grl_enabled,menuUrl:"/vendorSearchCountry/restaurant/".concat(r.vendor_id,"/").concat((0,v.lV)(r.vendor_name)),branchSlug:(0,v.lV)(r.vendor_name),branchId:r.vendor_id}},h=function e(){(0,i.Z)(this,e)};h.getCoordinatesVertical=(r=(0,o.Z)(function(e,t){var n;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,g.S1)().get("".concat("/available-verticals","/?countryId=").concat(t,"&lat=").concat(e.lat,"&lon=").concat(e.lng))];case 1:return[2,n.sent().data.result];case 2:return n.sent(),[2,null];case 3:return[2]}})}),function(e,t){return r.apply(this,arguments)}),h.getVendorSearch=(a=(0,o.Z)(function(e,t,n,r,a){var s;return(0,u.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,g.E0)().get("/?countryId=".concat(t,"&lat=").concat(e.lat,"&lon=").concat(e.lng,"&q=").concat(n,"&vid=").concat(r,"&lmt=").concat(a||50))];case 1:return[2,(0,s.sent().data).result.map(function(e){return p(e)})];case 2:return s.sent(),[2,null];case 3:return[2]}})}),function(e,t,n,r,s){return a.apply(this,arguments)}),h.getNewVendorsSearch=(s=(0,o.Z)(function(e){var t,n,r,a,s,o,i,c,m,v,p,h,b,_,y,x,N,I,C,G;return(0,u.__generator)(this,function(u){switch(u.label){case 0:t=e.coords,n=e.countryId,r=e.q,a=e.vid,s=e.pageNumber,o=e.lmt,i=e.sorting,c=e.selectedFilters,m=e.selectedCuisines,h=[],i&&(v={by:i,order:"ASC"}),null==c||c.forEach(function(e){h.push({type:e.value,values:[e.optionId]})}),(null==m?void 0:m.length)&&h.push({type:"cuisine",values:m}),h.length&&(p=h),b={latitude:t.lat,longitude:t.lng,query:r,vertical_ids:a,limit:o||1e3,country_id:n,page_number:s,sort:v,filters:p},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,g.Dp)().post("/v3/vendor",b)];case 2:return G=u.sent().data,[2,(0,l.Z)((0,d.Z)({},G.result),{vendors:(null===(_=G.result.vendors)||void 0===_?void 0:_.map(function(e){return f({vendor:e,baseURL:G.base_url})}))||[],cuisines:(null===(x=null===(y=G.result.filters)||void 0===y?void 0:y.find(function(e){return"CUISINE"===e.id}))||void 0===x?void 0:x.options.map(function(e){return{label:e.title,value:e.id}}))||[],sorting:(null===(I=null===(N=G.result.filters)||void 0===N?void 0:N.find(function(e){return"SORTING"===e.id}))||void 0===I?void 0:I.options)||[],filters:(null===(C=G.result.filters)||void 0===C?void 0:C.filter(function(e){return"SINGLE"===e.selection_type&&!["CUISINE","SORTING"].includes(e.id)}).map(function(e){var t,n;return{label:e.title,value:e.id,optionId:null===(t=e.options)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.id}}))||[]})];case 3:return u.sent(),[2,null];case 4:return[2]}})}),function(e){return s.apply(this,arguments)})}}]);